---
title: "T6: Romancero Gitano I"
author: "Javier Ribal del R√≠o"
date: "2025-12-19"
date-modified: today
affiliation: "Hyperloop UPV"
---

## Objetivo de la tarea

El objetivo de esta tarea es aplicar los conceptos b√°sicos de HTML, CSS y JavaScript (DOM) para crear una p√°gina web interactiva que muestre poemas del *Romancero gitano* de Federico Garc√≠a Lorca y modifique su apariencia visual en funci√≥n de las diferentes met√°foras.


[Resultado esperado](romancero_gitano_web_interactiva.html)



## Estructura HTML

El documento HTML debe:

- Estar correctamente estructurado (`<!DOCTYPE>`, `<html>`, `<head>`, `<body>`).
- Contener un **contenedor principal** centrado horizontalmente.
- Incluir, en este orden:
  1. Un elemento para mostrar **informaci√≥n m√©trica** del poema (n√∫mero de estrofas y versos).
  2. Un elemento para el **t√≠tulo del poema**.
  3. Un elemento para el **texto del poema**, respetando los saltos de verso utilizando la etiqueta `<pre>`.
  4. Un **bot√≥n** que permita cambiar de poema.

No debe utilizarse ning√∫n *framework* ni librer√≠a externa.


## JavaScript

### Datos

En JavaScript se debe definir un **array de objetos**, donde cada objeto represente un poema y tenga al menos:

- Un t√≠tulo.
- El texto del poema como una cadena de texto, usando saltos de l√≠nea para los versos.

El cambio de poema debe hacerse recorriendo este array de forma c√≠clica (cola circular) mediante el bot√≥n.

[Descargar poemas](poemas.js) (click derecho guardar enlace como)


###  Manipulaci√≥n del DOM

El comportamiento de la p√°gina debe implementarse **exclusivamente con DOM nativo**, cumpliendo lo siguiente:

- Todas las funciones deben declararse como **arrow functions**.
- Al pulsar el bot√≥n:
  - Se actualiza el t√≠tulo.
  - Se actualiza el texto del poema.
  - Se modifica el formato del fondo.
  - Se recalculan y muestran:
    - N√∫mero de versos.
    - N√∫mero de estrofas (bloques separados por l√≠neas en blanco).

El c√°lculo debe realizarse a partir del texto del poema, no con valores predefinidos.


## CSS

Lorca utiliza las met√°foras y la alegor√≠a como elemento principal sobre el que construye sus poemas, al analizar profundamente descubrimos que siempre recurre a las mismas met√°foras.

El color no se utiliza aqu√≠ solo como elemento decorativo, sino como un recurso sem√°ntico: cada color representa un s√≠mbolo literario presente en el poema.

Desde el punto de vista t√©cnico:
- Los **colores de fondo y de texto** deben definirse en **clases CSS**.
- JavaScript no decide colores, √∫nicamente decide qu√© clase aplicar seg√∫n el contenido del poema.


### Palabras clave y colores asociados

Se debe detectar el texto del poema las siguientes **palabras clave** y aplicar el **color de fondo correspondiente**:

- **guardia civil** ‚Üí fondo **verde militar**
- **sangre** ‚Üí fondo **granate oscuro**
- **caballo** ‚Üí fondo **color tierra**
- **cuchillo / navaja** ‚Üí fondo **plateado**

El color del texto debe elegirse siempre de forma que exista **contraste suficiente** con el fondo y se garantice la legibilidad.

Si el poema contiene varias palabras clave, solo debe aplicarse **un √∫nico estilo**, siguiendo un orden de prioridad definido previamente.

Si el poema no contiene ninguna de estas palabras, se aplicar√° un **estilo por defecto** con colores aleatorios.



## Extra opcional: s√≠mbolo *aurora* üåà

De forma **voluntaria**, se puede a√±adir el s√≠mbolo **`aurora`**, que tendr√° **prioridad absoluta sobre todos los dem√°s**.

Cuando el poema contenga la palabra `aurora`, el fondo debe mostrar un **degradado animado**.

### CSS necesario para el extra

```css
.aurora {
  background: linear-gradient(120deg,
    #ff005d,
    #ff9f1c,
    #ffee32,
    #3cff00,
    #00e5ff,
    #7a00ff,
    #ff00c8
  );
  background-size: 600% 600%;
  animation: aurora 10s linear infinite;
  color: black;
}

@keyframes aurora {
  0%   { background-position: 0% 50%; }
  50%  { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}
```

---

## Consejos

### Centrado de la p√°gina (layout cl√°sico)

Toda la p√°gina debe estar centrada **horizontalmente**.

El centrado se consigue mediante:

- Un contenedor con un ancho m√°ximo definido.
- M√°rgenes autom√°ticos a izquierda y derecha.

Desde el punto de vista conceptual:

- `margin: 0 auto` **no centra texto**, centra **bloques**.
- El navegador reparte autom√°ticamente el espacio sobrante a ambos lados del contenedor.


### Animaci√≥n del cambio de color

Para evitar que los cambios de color sean bruscos, se utiliza la propiedad **`transition`** en CSS.

Esta propiedad indica al navegador que los cambios en determinadas propiedades visuales deben hacerse de forma progresiva.

Ejemplo conceptual:

```css
body {
  transition: background-color 0.6s, color 0.6s;
}
```

Gracias a esta transici√≥n:
- Cuando JavaScript cambia una clase o un color,
- el navegador interpola autom√°ticamente entre el color anterior y el nuevo.

No es necesario programar animaciones en JavaScript: **CSS se encarga de todo el efecto visual**.


### B√∫squeda de una palabra

Para buscar si determinada palabra determinada se debe utilizar la funci√≥n `includes` de la clase string

```js

texto = "hoy nieva";

texto.includes("nieva");    //TRUE
texto.includes("llueve");   //FALSE
```


### Generaci√≥n del color aleatorio

Para la generaci√≥ndel color aleatorio de puede utilizar la siguiente funci√≥n 

```js
const randomColor = () => '#' + Math.floor(Math.random() * 16777215).toString(16);
```

### Conteo versos y estrofas

El recuento de versos y estrofas debe hacerse **a partir del texto del poema**, no con valores escritos a mano. A continuaci√≥n se dan algunas **pistas t√©cnicas** para abordar este problema.

#### Conteo de versos

Un verso puede considerarse, a efectos pr√°cticos en esta tarea, como **una l√≠nea de texto no vac√≠a**.

Una estrategia habitual consiste en:
- Separar el texto por saltos de l√≠nea.
- Eliminar las l√≠neas vac√≠as o formadas solo por espacios.
- Contar cu√°ntas l√≠neas v√°lidas quedan.

Ejemplo orientativo:

```js
const versos = texto
  .split('\n')
  .filter(linea => linea.trim() !== '')
  .length;
```

Este enfoque es suficiente para la mayor√≠a de los poemas del *Romancero gitano* y evita errores frecuentes.

#### Conteo de estrofas

Una estrofa puede entenderse como un **bloque de versos separado de otros bloques por una l√≠nea en blanco**.

Una posible estrategia es:
- Separar el texto usando dos (o m√°s) saltos de l√≠nea consecutivos.
- Eliminar bloques vac√≠os.
- Contar los bloques resultantes.

Ejemplo orientativo:

```js
const estrofas = texto
  .split(/\n\s*\n/)
  .filter(bloque => bloque.trim() !== '')
  .length;
```



**Entrega:** un √∫nico archivo HTML funcional.

## Recomendaciones para afrontar la tarea

Al enfrentarnos a un proyecto de cierta complejitud, el como afrontarlo resulta de cricial para el desarollo del mismo por ello a a continuaci√≥n dejo un esquema de implementaci√≥n modular.  Ser√≠a mejor no utilizarlo, pero puede ser un buen punto de partida si no se sabe como empezar la app, no es el √∫nico proceso de implementaci√≥n v√°lido ni es m√°s correcto que cualquier otro

1. Estructura de HTML b√°sica contadores de versos y estrofas *placeholders* de poema y t√≠tulo y bot√≥n
2. Formateo CSS parte est√°tica: centrado, tama√±o (todo lo que no sea color)
3. Definir clases con colores predeterminados
4. L√≥gica interna con JS
  - Buscar palabra
  - Contar estrofas
  - Conteo versos
  - Selecci√≥n de clase 
  - Generar color aleatorio si procede
5. Integraci√≥n con DOM